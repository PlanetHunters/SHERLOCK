To generate an observation plan for your target, you must already have done a fit of your signal using SHERLOCK and go in the resulting folder (usually named
"fit_0"). You must also have a file containing basic informations about the (ground) observatories you want to consider, such as the "Observatories.csv" you
can find in this example. Note that Github previews this file and removes the commas between the values, be sure you have them in your own file.
Your "Observatories.csv" file must have these parameters:
  name : name of the observatory (call it whatever makes it for you, it's not regulated).
  tz : the time zone of the observatory, you can leave it empty, SHERLOCK gets it by itself.
  lat : latitude
  lon : longitude
  alt : altitude

Once you have these files, you can execute the planning module of SHERLOCK using this line:
  python3 -m sherlockpipe.plan --observatories Observatories.csv

If you encounter any issue, please refer to the "Troubleshooting" file, still at the draft state, as we need your bugs to expand it :)
If your error is not solved in the "Troubleshooting" file, please let us know about it, so we can work on a patch !

During the execution, SHERLOCK will create a "plan" folder in which you will find two files, one csv and one pdf.
The csv file contains the following informations:
  observatory : observatory's name as you defined it.
  timezone : time zone of the observatory.
  start_obs : date and time where the observation would start. Format is yyyy-mm-dd for the date, then "T" for the time, formated hh:mm:ss.sss in 24h format.
  end_obs : date and time where the observation would end, same format as for "start_obs".
  ingress : time where the transit should begin (best estimation), same format as for "start_obs".
  egress : time where the transit should end (best estimation), same format as for "start_obs".
  midtime : middle time of the transit (best estimation), same format as for "start_obs".
  midtime_up_err_h : maximum time deviation from the midtime, in hours (?) mmmmmmmmmmmm.
  midtime_low_err_h : mmmmmmmmm deviation from the midtime, in hours.
  twilight_evening : earliest time at which the observation can start, same format as for "start_obs".
  twilight_morning : Latest time at which the observation can end, same format as for "start_obs".
  observable : Minimum fraction of the transit that must be observable to consider an observation.
  moon_phase : Phase of the Moon, from 0 (new Moon) to 1 (full Moon).
  moon_dist : Angular distance between the Moon and the target, in degrees.
  
In the pdf file, you will find a quick recap of the targeted star, signal, few key parameters for the observation and the observatories. After that, begin a
large table containing all the elements required to schedule an observation, along with small visual interpretation of the conditions of the observations.
The first column "Observatory" is the name of the observatory as you defined it with the second column "TZ" its time zone. The third one, "Event times", gives
the key times for the observation such as :
  TWE : "Twilight Evening", time in the evening from when an observation is possible.
  SO : Start of the observation.
  I : Expected time of ingress (begining of the transit).
  M : Expected time of the middle time of the transit.
  E : Expected time of the egress (end of the transit).
  EO : End of the observation.
  TWM : "Twilight Morning", time in the morning until whent an observation is possible.
  
The next column, "TT Error" gives the error margins for the time where the transit should happen, in hours. "Moon" gives a recap of the state of the moon
durring the observation night, with first its phase (in %) and then its angular distance to the target (in Â°). Then comes the "Image" column, where there is
a lot to say. The abscice is the time which is not visually quantified as the values are in the column "Event times"). The background shows when it is the
night (grey) or day (white). The blue line is a visualisation of the elevation of the target, with the values on the right axis in degrees. The bottom green
patch is the part of the sky where the target would be too low to observe. Vertical lines are :
  Black : Expected time of the middle time of the transit.
  Orange : Expected times of the ingress and egress.
  Pink/violet : Start and end of the observation.
  Red : Temporal incertainity for the ingres (left line) and egress (right line).


(mmmmmmm todo : explin left axis : unit and details).











If something is not clear enough, please tell us so we can improve it !

// end
